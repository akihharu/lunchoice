<div class="dishes-container">
  <h2>今日のランチの候補</h2>

  <% if @dishes.any? %>
    <p>選択された条件に合う料理が <%= @dishes.count %> 件見つかりました！</p>
    
    <ul class="dish-list">
      <% @dishes.each do |dish| %>
        <li class="dish-item">
          <span class="dish-name"><%= dish.name %></span>
          <% if user_signed_in? %>
            <%= form_with url: choices_path, method: :post, local: true, class: "record-form" do %>
              <%= hidden_field_tag :dish_id, dish.id %>
              <%= submit_tag "記録", class: "btn-record" %>
            <% end %>
          <% end %>
        </li>
      <% end %>
    </ul>
  <% else %>
    <div class="no-results">
      <p>ごめんなさい、選択された条件に合う料理は見つかりませんでした😭</p>
      <p>別の組み合わせを試してみてください。</p>
    </div>
  <% end %>

  <% if !user_signed_in? %>
      <div class="login-prompt">
        <p>記録するにはログインが必要です</p>
        <%= link_to 'サインアップ', new_user_registration_path, class: 'btn-prompt' %>
        <%= link_to 'ログイン', new_user_session_path, class: 'btn-prompt' %>
      </div>
  <% end %>

  <div class="actions">
    <%= link_to '選択画面に戻る', new_choice_path, class: 'btn-back' %>
  </div>
</div>
