<div class="container my-5">
  <h2 class="text-center mb-4 fw-bold">投稿を編集</h2>
  <div class="row justify-content-center">
    <div class="col-md-8">
      
      <%= form_with(model: @post, local: true, data: { turbo: false }) do |f| %>

        <%= render 'shared/error_messages', object: f.object %>

        <div class="form-group mb-3">
          <%= f.label :photo, "写真を変更する (任意)" %>
          <%= f.file_field :photo, class: "form-control-file", accept: 'image/jpeg,image/gif,image/png' %>
          <% if @post.photo.attached? %>
            <div class="mt-2">
              <p class="small text-muted mb-1">現在の写真:</p>
              <%= image_tag @post.photo.variant(:thumb), class: "img-thumbnail", style: "width: 150px; height: 100px; object-fit: cover;" %>
            </div>
          <% end %>
        </div>

        <div class="form-group mb-4">
          <%= f.label :dish_id, "選択した料理" %>
          <%= f.collection_select(:dish_id, @dishes, :id, :name, { prompt: "料理を選んでください" }, { class: "form-control" }) %>
        </div>

        <div class="d-grid gap-2">
          <%= f.submit "投稿を更新する", class: "btn btn-primary btn-lg" %>
          <%= link_to "キャンセル", posts_path, class: "btn btn-outline-secondary" %>
        </div>
      <% end %>

    </div>
  </div>
</div>